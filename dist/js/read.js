"use strict";define(["jquery","base64","handle","common"],function(c,n,o,t){var e,a=window.localStorage,s=parseInt(a.getItem("fontSize"))||16,l=a.getItem("defaultBg")||"#f7e6d9",i=parseInt(a.getItem("mun"))||1,r=c("#ht").html(),d=0;c.ajax({url:"/home/mun",dataType:"json",async:!1,success:function(n){e=n.item,d=e.toc.length}}),console.log(e);var u=c("#mun_nav").html();function m(n){var o="";c.ajax({url:"/home/list",async:!1,data:{id:n},dataType:"json",success:function(n){o=n.jsonp,console.log(o)}});var t=document.createElement("script");t.src=o,document.head.append(t),c(".scroll").html(""),a.setItem("mun",n.toString()),c(".read_nav").html(n+"/"+d)}t(u,e,".mun_nav"),c(".read-foot a").eq(0).on("click",function(){c(".mun_nav").addClass("show"),c(".mask").removeClass("blo")}),c(".mun_nav ul").on("click","li",function(){c(".mun_nav").removeClass("show"),m(i=c(this).index())}),c(".read_nav").html(i+"/"+d),m(i),window.duokan_fiction_chapter=function(n){var o=c.base64().decode(n);t(r,JSON.parse(o),".content .scroll"),c(".read-cont>p").css({fontSize:s})},c(".upmun").on("click",function(){--i<1&&(i=1),m(i)}),c(".downmun").on("click",function(){4<++i&&(i=4),m(i)}),c(".content").on("click",function(){c(".mask").addClass("blo")}),c(".mid").on("click",function(){c(".mask").removeClass("blo")});var f=!0;function g(n){c(".read-cont p").css({fontSize:n+"px"}),a.setItem("fontSize",n.toString())}c(".read-foot a").eq(1).on("click",function(){f?(c(".read-kind").css({display:"block"}),c(".zhang").css({display:"none"}),f=!1):(c(".read-kind").css({display:"none"}),c(".zhang").css({display:"block"}),f=!0)}),c(".read-font span").eq(0).on("click",function(){28<(s+=2)&&(s=28),g(s)}),c(".read-font span").eq(1).on("click",function(){(s-=2)<12&&(s=12),g(s)}),console.log(l),c(".content").css({background:l}),console.log(c(".content").css("background")),c(".read-bg span").on("click",function(){var n=c(this).css("background");c(".content").css({background:n}),a.setItem("defaultBg",n)});var h=!0,k=(new Date).getHours();k<22&&6<k?(c(".read-foot a").eq(2).html("夜间"),c(".content").css({background:a.getItem("defaultBg")||"#f7e6d9",color:"#000"}),h=!0):(c(".read-foot a").eq(2).html("白天"),c(".content").css({background:"#000",color:"#4e534f"}),h=!1),c(".read-foot a").eq(2).on("click",function(){h?(c(this).html("白天"),c(".content").css({background:"#000",color:"#4e534f"}),h=!1):(c(this).html("夜间"),c(".content").css({background:a.getItem("defaultBg")||"#f7e6d9",color:"#000"}),h=!0)}),c(".content").on("scroll",function(n){var o=c(this).height(),t=c(".scroll").height(),e=c(this).scrollTop();console.log(t-e,o),t-e-100<o&&(4<++i&&(i=4),m(i))})});